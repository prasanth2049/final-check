-- Include table data insertion, updation, deletion and select scripts

----------------------------------------------------------------------
-------------------- Adding movie in movie table --------------------
----------------------------------------------------------------------

INSERT INTO movie
VALUE
(1, 'Avatar',2787965087,'Yes','2017-03-15','Science Fiction','Yes'),
(2, 'The Avengers',1518812988,'Yes','2017-12-23','Superhero','No'),
(3, 'Titanic',2187463944,'Yes','2017-08-21','Romance','No'),
(4, 'Jurassic World',1671713208,'No','2017-07-02','Science Fiction','Yes'),
(5, 'Avengers: End Game',2750760348,'Yes','2022-11-02','Superhero','Yes');


-----------------------------------------------------------------------
-- display movie list -------------------------------------------------
-----------------------------------------------------------------------

select 
m_title as Title,
m_boxoffice as Boxoffice,
m_active as Active,
m_date_of_launch as Date_of_launch,
m_genre as genre,
m_has_teaser as Has_teaser
from movie;


-----------------------------------------------------------------------
----------- Update movie in movie table -------------------------------
-----------------------------------------------------------------------

UPDATE movie
SET m_title='forrest gump'
WHERE m_id=1;

-----------------------------------------------------------------------
-------- Displaying customer list -------------------------------------
-----------------------------------------------------------------------

select m_title,m_has_teaser,m_boxoffice,m_genre from movie
where m_active='Yes' and m_date_of_launch <= current_date();

------------------------------------------------------------------------
-- Setting user Id and user name ---------------------------------------
------------------------------------------------------------------------


insert into user value(1,'prasanth204'),
(2,'user203');

-------------------------------------------------------------------------
-- display user list ----------------------------------------------------
-------------------------------------------------------------------------


select 
us_id as User_Id,
us_name as User_Name
 from user;

-------------------------------------------------------------------------
-- insert value in favorite --------------------------------------------------------
-------------------------------------------------------------------------

insert into favorite(ft_us_id,ft_pr_id) value (1,1),(1,3),(1,2),(1,3);

-------------------------------------------------------------------------
-- view favorite items---------------------------------------------------
-------------------------------------------------------------------------

select m_title,m_has_teaser,m_boxoffice from movie
inner join favorite on ft_pr_id=m_id
where ft_us_id=1;

---------------------------------------------------------------------------
-- view no of favorite ----------------------------------------------------
---------------------------------------------------------------------------

select count(m_title) as No_of_favorite from movie
inner join favorite on ft_pr_id=m_id
where ft_us_id=1;


---------------------------------------------------------------------------
-- view favorite ----------------------------------------------------------
---------------------------------------------------------------------------

select 
ft_id as ft_id,
ft_us_id as ft_user_id,
ft_pr_id as ft_pr_id
 from favorite;


----------------------------------------------------------------------------
-- Remove item from favorite -----------------------------------------------
----------------------------------------------------------------------------

delete from favorite where ft_us_id=1 and ft_pr_id=3 limit 1;

-------------------------------------------------------------------------
-- view favorite items---------------------------------------------------
-------------------------------------------------------------------------

select m_title,m_has_teaser,m_boxoffice from movie
inner join favorite on ft_pr_id=m_id
where ft_us_id=1;



----------------------------------------------------------------------------
-- view no of favorite after delete ----------------------------------------------
----------------------------------------------------------------------------

select count(m_title) as No_of_favorite from movie
inner join favorite on ft_pr_id=m_id
where ft_us_id=1;



----------------------------------------------------------------------------
-- Delete favorite----------------------------------------------------------
----------------------------------------------------------------------------


delete from favorite;



